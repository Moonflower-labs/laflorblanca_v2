import{v as x,s as p,u,i as j,l as f,j as e,I as v,P as h,f as g}from"./index-Dz9OzMCC.js";import{F as N,L as m,i as c,C as k,a as w}from"./helpers-CVl3iXQd.js";import{V as L}from"./VideoComponent-DWXN3XX3.js";const C=async({request:s,params:t})=>{const i=new URL(s.url),o=new URLSearchParams(i.search);o.set("section","soul");const l=await x.getVideo(t.id,o);return{video:(l==null?void 0:l.video)||null}},D=async({request:s,params:t})=>{const i=await s.formData();switch(i.get("intent")){case"like":return await p(i);case"favorite":return await x.addToFavorites(t.id,i);default:throw new Response("",{status:405})}};function R(){var r,d;const{video:s}=u()||{video:null},{user:t}=j("root")||{user:null},i=f(),o=s&&((d=(r=t==null?void 0:t.profile)==null?void 0:r.favorite_videos)==null?void 0:d.some(a=>(s==null?void 0:s.id)!==void 0&&a===(s==null?void 0:s.id))),l=t==null?void 0:t.likes.liked_videos,n=t==null?void 0:t.likes.liked_comments;return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"pb-6 pt-16 px-10 md:px-40",children:[e.jsxs("h2",{className:"relative text-primary font-semibold text-2xl text-center mt-4 mb-3",children:[e.jsxs("span",{className:"fixed left-1 top-9 flex flex-row gap-3 align-middle cursor-pointer text-primary",onClick:()=>i("..",{preventScrollReset:!0}),children:[e.jsx(v,{size:24}),"Atrás"]}),s.title]}),e.jsx(L,{link:s}),e.jsx("div",{className:"divider divider-primary md:w-2/3 mx-auto",children:e.jsx("span",{className:"text-primary",children:e.jsx(h,{size:34})})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 align-middle",children:[e.jsx("div",{className:"flex gap-4 align-middle",children:e.jsx(N,{object:s,isFavorite:!!o})}),e.jsx(m,{object:"video",id:s.id,isLiked:c(s.id,l)})]})]}),e.jsxs("h2",{className:"flex gap-4 align-middle text-primary justify-center font-semibold text-2xl mt-4 mb-3",children:["Comentarios ",e.jsx(g,{size:24,className:"my-auto"})]}),e.jsx("div",{className:"md:px-40 mb-6 max-h-44 bg-primary/20 rounded-md mx-4 overflow-y-auto",children:s!=null&&s.comments&&s.comments.length?s.comments.map(a=>e.jsxs("div",{className:"flex flex-row gap-4 align-middles",children:[e.jsx(k,{comment:a}),e.jsx(m,{object:"comment",id:a.id,isLiked:c(a.id,n)})]},a.id)):e.jsx("p",{className:"text-xl text-center",children:"Nadie ha comentado todavía."})}),e.jsx(w,{object:s,fieldName:"video"})]}):e.jsx("div",{className:"text-3xl text-center h-full my-auto pt-10",children:"No hemos encontrado el video."})})}export{R as SoulDetail,D as soulDetailAction,C as soulDetailLoader};
