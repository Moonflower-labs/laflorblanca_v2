import{d as l,j as e,m as r,l as x,n as u,r as d,o as h,q as p}from"./index-DpYbqAn8.js";const y=({object:t,isFavorite:s})=>{var n;const a=l(),i=a.formData?((n=a.formData)==null?void 0:n.get("action"))==="add":s;return e.jsx(a.Form,{method:"post",className:"my-auto",children:e.jsxs("fieldset",{disabled:a.state!=="idle",children:[e.jsx("input",{type:"hidden",name:"id",value:t.id}),e.jsx("input",{type:"hidden",name:"action",value:i?"remove":"add"}),e.jsx("input",{type:"hidden",name:"intent",value:"favorite"}),e.jsx("button",{type:"submit",className:"text-accent text-xl",name:"id",value:t.id,children:i?e.jsx(r.div,{initial:{scale:0},animate:{scale:1},children:e.jsx(x,{size:25})},"favorite"):e.jsx(r.div,{initial:{scale:0},animate:{scale:1},children:e.jsx(u,{size:25})},"unfavorite")})]})})},j=t=>new Date(t).toLocaleDateString(),f=t=>{if(t){const a=t.slice(0,3).map(n=>n.user).join(", "),i=t.length>3?` y ${t.length-3} mas.`:"";return`${a}${i}`}return"0 me gusta"},b=({comment:t})=>{var s;return e.jsxs(r.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"chat chat-start mb-2",children:[e.jsxs("div",{className:"chat-header mb-2",children:[t.user,e.jsx("time",{className:"text-xs opacity-50 ms-3",children:j(t.created)})]}),e.jsxs("div",{className:"chat-footer mt-1",children:[(s=t.likes)==null?void 0:s.length," me gusta.",e.jsx("span",{className:"text-xs opacity-50 ms-3",children:f(t.likes)})]}),e.jsx("div",{className:"chat-bubble chat-bubble-primary",children:t.text})]},`comment-${t.id}`)},N=({object:t,fieldName:s})=>{var n,c;const a=l(),i=d.useRef(null);return d.useEffect(()=>{var m,o;a.state==="idle"&&((m=a.data)!=null&&m.message)&&((o=i.current)==null||o.reset())},[(n=a.data)==null?void 0:n.message,a.state,i]),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl text-primary mb-4",children:"Añade un comentario"}),e.jsxs(a.Form,{ref:i,method:"post",action:"/comment",className:"flex flex-col mx-3 md:w-1/3 md:mx-auto pb-4",children:[e.jsx("input",{type:"hidden",name:s,value:t.id}),e.jsx("textarea",{className:"textarea textarea-primary mb-4",placeholder:"Comentario",name:"text"}),e.jsx("p",{className:"text-error mb-3",children:((c=a.data)==null?void 0:c.error)&&a.data.error}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm w-1/2 mx-auto",children:"Añadir"})]})]})},g=({object:t,id:s,isLiked:a})=>{const i=l(),n=i.formData?i.formData.get("action")==="like":a;return e.jsxs(i.Form,{method:"post",className:"my-auto",children:[e.jsx("input",{type:"hidden",name:t,value:s}),e.jsx("input",{type:"hidden",name:"intent",value:"like"}),e.jsx("button",{type:"submit",name:"action",value:n?"dislike":"like",children:n?e.jsx(r.div,{initial:{scale:0},animate:{scale:1},children:e.jsx(h,{className:"text-primary",size:25})},"liked"):e.jsx(r.div,{initial:{scale:0},animate:{scale:1},children:e.jsx(p,{className:"text-primary",size:25})},"disliked")})]})};function k(t,s){return t==null||s==null?!1:s.includes(t)}export{b as C,y as F,g as L,N as a,j as f,k as i};
