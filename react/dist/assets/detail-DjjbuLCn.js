import{v as j,s as f,u as h,h as u,k as v,j as e,l as g,I as k,i as N,f as w}from"./index-CNPLqyP2.js";import{f as L,F as b,L as x,i as p,C as y,a as F}from"./helpers-DtwQPPdk.js";import{V as C}from"./VideoComponent-D5vkRMQN.js";const B=async({request:s,params:a})=>{const t=new URL(s.url),o=new URLSearchParams(t.searchParams);o.set("section","spirit");const l=await j.getVideo(a.id,o);return{video:(l==null?void 0:l.video)||null}},P=async({request:s,params:a})=>{const t=await s.formData();switch(t.get("intent")){case"like":return await f(t);case"favorite":return await j.addToFavorites(a.id,t);default:throw new Response("",{status:405})}},V=()=>{var r,d,c,m;const{video:s}=h()||{video:null},{user:a}=u("root")||{user:null},t=v(),o=s&&((d=(r=a==null?void 0:a.profile)==null?void 0:r.favorite_videos)==null?void 0:d.some(i=>(s==null?void 0:s.id)!==void 0&&i===(s==null?void 0:s.id))),l=(c=a==null?void 0:a.likes)==null?void 0:c.liked_videos,n=(m=a==null?void 0:a.likes)==null?void 0:m.liked_comments;return e.jsx(g,{children:s?e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"pb-6 pt-16 px-10 md:px-40",children:[e.jsxs("h2",{className:"relative text-secondary font-semibold text-2xl text-center mt-4 mb-3",children:[e.jsxs("span",{className:"fixed left-1 top-9 flex flex-row gap-3 align-middle cursor-pointer text-primary",onClick:()=>t("..",{preventScrollReset:!0}),children:[e.jsx(k,{size:24}),"Back"]}),s.title]}),e.jsx(C,{link:s}),e.jsxs("p",{className:"mb-4",children:["La Flor Blanca el ",L(s.uploaded_on)]}),e.jsx("div",{className:"divider divider-primary md:w-2/3 mx-auto",children:e.jsx("span",{className:"text-primary",children:e.jsx(N,{size:34})})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 align-middle",children:[e.jsx("div",{className:"flex gap-4 align-middle",children:e.jsx(b,{object:s,isFavorite:!!o})}),e.jsx(x,{object:"video",id:s.id,isLiked:p(s.id,l)})]})]}),e.jsxs("h2",{className:"flex gap-4 align-middle text-secondary justify-center font-semibold text-2xl mt-4 mb-3",children:["Comentarios ",e.jsx(w,{size:24,className:"my-auto"})]}),e.jsx("div",{className:"md:px-40 mb-6 max-h-44 bg-primary/20 rounded-md mx-4 overflow-y-auto",children:s!=null&&s.comments?s.comments.map(i=>e.jsxs("div",{className:"flex flex-row gap-4 align-middles",children:[e.jsx(y,{comment:i}),e.jsx(x,{object:"comment",id:i.id,isLiked:p(i.id,n)})]},i.id)):e.jsx("p",{className:"text-xl text-center",children:"Nadie ha comentado todav√≠a."})}),e.jsx(F,{object:s,fieldName:"video"})]}):e.jsx("div",{className:"text-3xl text-center h-full my-auto",children:"No hemos encontrado el post."})})};export{V as SpiritDetail,P as spiritDetailAction,B as spiritDetailLoader};
