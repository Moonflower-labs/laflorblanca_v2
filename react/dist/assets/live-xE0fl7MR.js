import{a as l,B as o,c as m,e as p,u as x,r as c,j as e,d as h}from"./index-AknObfPh.js";const b=async()=>{try{return{live_used_questions:(await l.get("api/premium-questions/retrieve_premium_used_questions/?type=live")).data}}catch(s){console.error(s)}return null},N=async({request:s})=>{const t=await s.formData(),r=t.get("text");if(((t==null?void 0:t.get("remaining_questions"))||0)<=0)return o.error("Yas has usado el máximo numero de preguntas este mes"),null;const n={};if(r||(n.text="Escribe una pregunta"),Object.keys(n).length)return n;try{const a=await l.post("api/premium-questions/",t),u=new Promise(d=>d(a));o.promise(u,{pending:"Enviando pregunta...",success:"Pregunta enviada",error:"Ha ocurrido un error."})}catch(a){console.error(a),o.error("Ha ocurrido un error.")}return null};function g(){const s=m(),t=p(),{live_used_questions:r=3}=x()||{live_used_questions:1},i=c.useRef(null),n=1-Number(r);return c.useEffect(()=>{var a;t.state==="loading"&&t.formData&&!s&&((a=i.current)==null||a.reset())}),t.state,e.jsxs("div",{className:"text-center pt-16 pb-6",children:[e.jsx("img",{className:"tarot",src:"",alt:"",width:200}),e.jsx("h2",{className:"text-3xl font-semibold text-primary mb-1",children:"Pregunta con respuesta en directo"}),e.jsxs("div",{className:"p-10 pt-6 md:w-2/4 mx-auto",children:[e.jsx("p",{className:"h3 mb-3",children:"Una sesión mensual en directo espontánea, respondiendo usando el método que surja. Una Pregunta por persona o miembro."}),e.jsx("p",{className:"mb-4",children:"Si no puedes estar en el directo tendrás acceso a dejar tus preguntas para el directo debajo. Todo lo que no de tiempo a contestar durante el directo se contestará en la sección Respuestas del Plan Espíritu."})]}),e.jsxs("div",{className:"row my-4 justify-content-center text-center mx-auto",children:[e.jsxs("div",{className:"",children:["Preguntas disponibles:"," ",e.jsx("span",{className:"text-warning",children:n})," de",e.jsx("span",{className:"h4 text-warning",children:" 1"})]}),e.jsxs(h,{ref:i,method:"post",className:"bg-primary/30 p-2 rounded-lg md:w-1/2 mx-auto shadow-lg",children:[e.jsx("input",{type:"hidden",name:"remaining_questions",value:n}),e.jsx("input",{type:"hidden",name:"type",value:"live"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("label",{className:"form-control mb-6",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"1. ¿Qué necesitas aclarar, entender?"})}),e.jsx("textarea",{className:"textarea textarea-bordered h-24",placeholder:"Escribe tu pregunta aqui...",name:"text"}),(s==null?void 0:s.text)&&e.jsx("span",{className:"text-error mt-2",children:s==null?void 0:s.text})]}),e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("button",{type:"reset",className:"btn btn-outline btn-accent mx-1 rounded-1",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-primary mx-1 rounded-1",children:"Enviar"})]})]})]})]}),e.jsxs("div",{className:"row my-4 justify-content-center text-center mx-auto",children:[e.jsx("p",{className:"h2 title",children:"SESIONES EN DIRECTO"}),e.jsx("p",{className:"h3 mb-3",children:"Encuentra el link para la sessión a continuación:"}),e.jsx("div",{className:"",children:e.jsxs("a",{role:"button",href:"{{link[2]}}",className:"link-info link-underline-opacity-0",target:"_blank",children:[e.jsx("i",{className:"bi bi-play-fill h2 me-3"})," "]})})]})]})}export{g as Component,N as action,b as loader};
