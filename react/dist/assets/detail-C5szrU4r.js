import{v as j,s as f,u,i as v,l as h,j as e,I as g,k,P as N,f as w}from"./index-CJzJuuVF.js";import{F as L,L as x,i as p,C as b,a as y}from"./helpers-CU1BbdfS.js";import{V as F}from"./VideoComponent-Bgffoz1H.js";const B=async({request:s,params:t})=>{const a=new URL(s.url),o=new URLSearchParams(a.searchParams);o.set("section","spirit");const l=await j.getVideo(t.id,o);return{video:(l==null?void 0:l.video)||null}},P=async({request:s,params:t})=>{const a=await s.formData();switch(a.get("intent")){case"like":return await f(a);case"favorite":return await j.addToFavorites(t.id,a);default:throw new Response("",{status:405})}},A=()=>{var r,d,c,m;const{video:s}=u()||{video:null},{user:t}=v("root")||{user:null},a=h(),o=s&&((d=(r=t==null?void 0:t.profile)==null?void 0:r.favorite_videos)==null?void 0:d.some(i=>(s==null?void 0:s.id)!==void 0&&i===(s==null?void 0:s.id))),l=(c=t==null?void 0:t.likes)==null?void 0:c.liked_videos,n=(m=t==null?void 0:t.likes)==null?void 0:m.liked_comments;return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsxs("article",{className:"pb-6 pt-16 px-10 md:px-40",children:[e.jsxs("h2",{className:"relative text-secondary font-semibold text-2xl text-center mt-4 mb-3",children:[e.jsxs("span",{className:"fixed left-1 top-9 flex flex-row gap-3 align-middle cursor-pointer text-primary",onClick:()=>a("..",{preventScrollReset:!0}),children:[e.jsx(g,{size:24}),"Back"]}),s.title]}),e.jsx(F,{link:s}),e.jsxs("p",{className:"mb-4",children:["La Flor Blanca el ",k(s.uploaded_on)]}),e.jsx("div",{className:"divider divider-primary md:w-2/3 mx-auto",children:e.jsx("span",{className:"text-primary",children:e.jsx(N,{size:34})})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 align-middle",children:[e.jsx("div",{className:"flex gap-4 align-middle",children:e.jsx(L,{object:s,isFavorite:!!o})}),e.jsx(x,{object:"video",id:s.id,isLiked:p(s.id,l)})]})]}),e.jsxs("h2",{className:"flex gap-4 align-middle text-secondary justify-center font-semibold text-2xl mt-4 mb-3",children:["Comentarios ",e.jsx(w,{size:24,className:"my-auto"})]}),e.jsx("div",{className:"md:px-40 mb-6 max-h-44 bg-primary/20 rounded-md mx-4 overflow-y-auto",children:s!=null&&s.comments?s.comments.map(i=>e.jsxs("div",{className:"flex flex-row gap-4 align-middles",children:[e.jsx(b,{comment:i}),e.jsx(x,{object:"comment",id:i.id,isLiked:p(i.id,n)})]},i.id)):e.jsx("p",{className:"text-xl text-center",children:"Nadie ha comentado todav√≠a."})}),e.jsx(y,{object:s,fieldName:"video"})]}):e.jsx("div",{className:"text-3xl text-center h-full my-auto pt-10",children:"No hemos encontrado el video."})})};export{A as SpiritDetail,P as spiritDetailAction,B as spiritDetailLoader};
